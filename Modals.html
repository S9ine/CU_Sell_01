<div class="modal fade" id="settings-modal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="settingsModalLabel"><i class="bi bi-gear-fill me-2"></i>ตั้งค่าข้อมูลเอกสาร</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="settings-form">
                    <div class="mb-3"><label class="form-label">ชื่อบริษัท</label><input type="text" id="setting-companyName" class="form-control"></div>
                    <div class="mb-3"><label class="form-label">ที่อยู่ 1</label><input type="text" id="setting-address1" class="form-control"></div>
                    <div class="mb-3"><label class="form-label">ที่อยู่ 2</label><input type="text" id="setting-address2" class="form-control"></div>
                    <div class="mb-3"><label class="form-label">ข้อมูลติดต่อ</label><input type="text" id="setting-contactInfo" class="form-control"></div>
                </form>
            </div>
            <div class="modal-footer d-flex justify-content-between">
                <button type="button" class="btn btn-outline-danger btn-sm" onclick="handleClearCache()"><i class="bi bi-eraser-fill"></i> ล้างแคช</button>
                <div>
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">ยกเลิก</button>
                    <button type="submit" class="btn btn-primary" form="settings-form">บันทึก</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="sales-form-modal" tabindex="-1" aria-labelledby="salesFormModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="salesFormModalLabel">สร้างเอกสารขาย</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="resetSalesForm()"></button>
            </div>
            <div class="modal-body">
                <form id="salesForm">
                  <input type="hidden" id="salesFormDocId">
                  <input type="hidden" id="salesCustomerId">
                    <div class="row mb-3">
<div class="col-md-6">
    <label class="form-label">ชื่อลูกค้า</label>
    <div class="input-group">
        <input type="text" id="salesCustomerName" class="form-control" list="customer-options" required oninput="handleCustomerSelect(this.value)" placeholder="ค้นหาหรือเลือกลูกค้า...">
        <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#customer-form-modal" onclick="resetCustomerForm()">
            <i class="bi bi-person-plus-fill"></i>
        </button>
    </div>
</div>
                        <div class="col-md-6"><label class="form-label">เบอร์ติดต่อ</label><input type="text" id="salesCustomerTel" class="form-control" readonly></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6"><label class="form-label">พนักงานขาย</label><select class="form-select" id="salesperson" required><option value="" selected disabled>-- เลือกพนักงานขาย --</option></select></div>
                    </div>
                        <div class="row mb-3">
                        <div class="col-md-6">
                        <label class="form-label">แผงไข่ส่ง (แผง)</label>
                        <input type="number" id="salesTraysSent" class="form-control" value="0" min="0">
                        </div>
                        <div class="col-md-6">
                        <label class="form-label">แผงไข่รับคืน (แผง)</label>
                        <input type="number" id="salesTraysReceived" class="form-control" value="0" min="0">
                        </div>
                        </div>
                    <h5>รายการสินค้า</h5>
                    <table class="table table-sm align-middle">
                        <thead>
                          <tr>
                            <th>ชื่อสินค้า</th>
                            <th>จำนวน</th>
                            <th class="unit-select">หน่วย</th>
                            <th>ราคา/หน่วยย่อย</th>
                            <th>ราคารวม</th>
                            <th></th>
                            </tr></thead>
                        <tbody id="salesItemTableBody"></tbody>
                    </table>
                    <button type="button" class="btn btn-secondary btn-sm" onclick="addSalesItemRow()">+ เพิ่มรายการ</button>
                    <hr>
                    <div class="row justify-content-end">
                        <div class="col-md-6 col-lg-5">
                            <table class="table table-borderless table-sm">
                                <tbody>
                                    <tr><td><h5>ยอดรวม:</h5></td><td class="text-end"><h5 id="subtotal">฿ 0.00</h5></td></tr>
                                    <tr>
                                        <td><h5>ส่วนลด (บาท):</h5></td>
                                        <td class="text-end" style="width: 150px;">
                                            <input type="text" class="form-control text-end" id="discount" value="0.00" oninput="calculateTotals()">
                                        </td>
                                    </tr>
                                    <tr class="border-top border-2"><td><h4>ยอดรวมสุทธิ:</h4></td><td class="text-end"><h4 class="text-success" id="grandTotal">฿ 0.00</h4></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal" onclick="resetSalesForm()">ยกเลิก</button>
                <button type="submit" form="salesForm" id="sales-submit-btn" class="btn btn-primary">บันทึกการขาย</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="customer-form-modal" tabindex="-1" aria-labelledby="customerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="customer-modal-title">เพิ่มข้อมูลลูกค้าใหม่</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <input type="hidden" id="customerId">
                    <div class="row g-3">
                        <div class="col-md-6"><label class="form-label">ชื่อลูกค้า</label><input type="text" id="customerName" class="form-control" required></div>
                        <div class="col-md-6"><label class="form-label">เบอร์ติดต่อ</label><input type="tel" id="customerTel" class="form-control"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">ยกเลิก</button>
                <button type="submit" id="customer-submit-btn" class="btn btn-primary" form="customerForm"><i class="bi bi-save"></i> บันทึกข้อมูล</button>
            </div>
        </div>
    </div>
</div>
